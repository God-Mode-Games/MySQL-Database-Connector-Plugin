.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "mysql_set_local_infile_handler" "3" "" "Version 3.4.8" "MariaDB Connector/C"
.hy
.SS Name
.PP
mysql_set_local_infile_handler - Registers callback functions for LOAD
DATA LOCAL INFILE
.SS Synopsis
.IP
.nf
\f[C]
#include <mysql.h>

void STDCALL mysql_set_local_infile_handler(MYSQL *conn,
        int (*local_infile_init)(void **, const char *, void *),
        int (*local_infile_read)(void *, char *, uint),
        void (*local_infile_end)(void *),
        int (*local_infile_error)(void *, char *, uint),
        void *userdata);
\f[R]
.fi
.SS Description
.PP
Registers four callback functions which will be called if a LOAD DATA
LOCAL INFILE command will be executed.
.PP
The initialization function accepts 3 parameters and returns zero on
success, nonzero on error.
It allocates an handle, which will be passed to read, end and error
functions:
.PP
\f[C]int init(void **handle, const char *filename, void *userdata)\f[R]
.PP
The read function is called repeatly to read data chunks from file into
buffer.
The amount of bytes is limited by parameer buffer_len.
The function returns the number of bytes which were read from the file:
.PP
\f[C]int mysql_local_infile_read(void *handle, char * buffer, unsigned int buffer_len)\f[R]
.PP
The end function will be called after the read function returned zero
(no more bytes to read).
To prevent leaking of resources, the file must be closed and handle must
be freed inside this function:
.PP
\f[C]void end(void *handle);\f[R]
.PP
The error function is called to get an error message in case init, read
or end functions returned an error.
.PP
\f[C]error(void *handler, char *error_buf, unsigned int error_buf_len);\f[R]
.SS Parameter
.IP \[bu] 2
\f[C]mysql\f[R] - mysql handle, which was previously allocated by
\f[B]mysql_init(3)\f[R]
.IP \[bu] 2
\f[C]local_infile_init\f[R] - initialization function, e.g.\ for opening
the file
.IP \[bu] 2
\f[C]local_infile_read\f[R] - read function
.IP \[bu] 2
\f[C]local_infile_end\f[R] - terminating function, e.g.\ for closing the
file
.IP \[bu] 2
\f[C]local_infile_error\f[R] - error function
.IP \[bu] 2
\f[C]userdata\f[R] - a buffer which will be passed to all callback
function
.SS See also
.IP \[bu] 2
\f[B]mysql_set_local_infile_handler(3)\f[R]
